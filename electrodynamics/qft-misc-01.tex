\section{Integrals in QFT}

\subsection{Kinetic operator and a Green Function}

This problem is part of
\href{https://arxiv.org/abs/physics/0609191}{MontePython: Implementing Quantum Monte Carlo using Python}.

There is a kinetic operator defined as
$$
G_K \left(\mathbf{R}^\prime, \mathbf{R}, t\right) =
\frac{1}{\left(2\pi\right)^{3N}} \int e^{-i\mathbf{k}\mathbf{R}^\prime} e^{-Dtk^2} e^{-i\mathbf{k}\mathbf{R}} d\mathbf{k}
$$

This integral then is integrated and the following Green function is obtained
$$
G_K \left(\mathbf{R}^\prime, \mathbf{R}, t\right) =
\frac{1}{\left(4\pi Dt\right)^{3N/2}} e^{-\left(\mathbf{R}-\mathbf{R}^\prime\right) / 4Dt}
$$

And as we saw in \hyperref[jackson:problem-1.2]{Jackson problem 1.2}, the Green function we just got is equivalent to
$\delta\left(\mathbf{R} - \mathbf{R}^\prime\right)$.

But coming back to the integral, the trick is to complete the square!
\begin{align*}
G_K \left(\vect{R}^\prime, \vect{R}, t\right) &=
\frac{1}{\left(2\pi\right)^{3N}} \int e^{-i\vect{k}\vect{R}^\prime} e^{-Dtk^2} e^{-i\vect{k}\vect{R}} d\vect{k} \\
&= \frac{1}{\left(2\pi\right)^{3N}} \int e^{-Dtk^2 + -i\vect{k}\cdot\left(\vect{R}-\vect{R}^\prime\right)} d\mathbf{k}
\end{align*}

This last integral has the form $\int e^{ax^2 + bx} dx$, which can be solved as follows,
\begin{align*}
\int e^{ax^2 + bx} dx &= \int \exp\left\{ a\left(x^2 + \frac{b}{a}x\right) \right\} dx \\
&= \int \exp\left\{ a\left(x^2 + \frac{b}{a}x + \left(\frac{b}{2a}\right)^2 - \left(\frac{b}{2a}\right)^2 \right) \right\} dx \\
&= \int \exp\left\{ a\left(x + \frac{b}{2a}\right)^2 - \frac{b^2}{4a} \right\} dx \\
&= e^{-b^2/4a} \int e^{ a\left(x + \frac{b}{2a}\right)^2 } dx
\end{align*}

Now, let's look at $\int e^{ a\left(x + b/2a\right)^2 } dx$.
First, we need to make a transformation.
Let's define $u = x + b/2a$, then $du = dx$, the measure remains invariant (so do the limits of integration), so
$\int e^{ a\left(x + b/2a\right)^2 } dx = \int e^{ au^2 } du$.
Now, if we define $a = -c$, then 

\begin{align*}
\int e^{ a\left(x + b/2a\right)^2 } dx &= \int e^{ au^2 } du \\
&= \int e^{ -cu^2 } du \\
&= \sqrt{ \frac{\pi}{c} } = \sqrt{ \frac{\pi}{-a} } 
\end{align*}

This whole thing works if $a < 0$ but it turns out that this is also valid if $\re{(a)} \leq 0$ but $a \neq 0$.

Putting everything back together,
$$
\int e^{ax^2 + bx} dx = \sqrt{ \frac{\pi}{-a} } e^{-b^2/4a}
$$

Looking back at our original problem, we can chose $a = -Dt$ and $b = i \vect{r}$, where $\vect{r} = \vect{R}-\vect{R}^\prime$.
and so
\begin{align*}
G_K \left(\vect{R}^\prime, \vect{R}, t\right) &=
\frac{1}{\left(2\pi\right)^{3N}} \int e^{-Dtk^2 + -i\vect{k}\cdot\vect{r}} d\mathbf{k} \\
&= \frac{1}{\left(2\pi\right)^{3N}} \int e^{-Dt \left( k^2 + \frac{i\vect{k}}{Dt}\cdot\vect{r} \right)} d\mathbf{k} \\
&= \frac{1}{\left(2\pi\right)^{3N}} \int e^{-Dt \left( k^2 + \frac{i\vect{r}}{Dt}\cdot\vect{k} + \left(\frac{i\vect{r}}{2Dt}\right)^2 - \left(\frac{i\vect{r}}{2Dt}\right)^2 \right)} d\mathbf{k} \\
&= \frac{1}{\left(2\pi\right)^{3N}} \int e^{-Dt \left( k + \frac{i\vect{r}}{2Dt}\right)^2 - \frac{ \vect{r}^2 }{ 4Dt } } d\mathbf{k} \\
&= \frac{1}{\left(2\pi\right)^{3N}} e^{-\vect{r}^2 /4Dt } \int e^{-Dt \left( k + \frac{i\vect{r}}{2Dt}\right)^2 } d\mathbf{k} \\
\end{align*}

Again, since $\int e^{-ax^2} dx = \sqrt{ \frac{\pi}{a} }$,
then
\begin{align*}
\int e^{-Dt \left( k + \frac{i\vect{r}}{2Dt}\right)^2 } dk &= \sqrt{ \frac{\pi}{Dt} }
\end{align*}

Thus,
\begin{align*}
G_K \left(\vect{R}^\prime, \vect{R}, t\right) &=
\frac{1}{\left(2\pi\right)^{3N}} e^{-\vect{r}^2 /4Dt } \int e^{-Dt \left( k + \frac{i\vect{r}}{2Dt}\right)^2 } d\mathbf{k} \\
&= \frac{1}{\left(2\pi\right)^{3N}} e^{-\vect{r}^2 /4Dt } \left( \sqrt{ \frac{\pi}{Dt} } \right)^{3N} \\
&= \frac{1}{\left(4\pi^2\right)^{3N/2}} \frac{\pi^{3N/2}}{(Dt)^{3N/2}} e^{-\vect{r}^2 /4Dt } \\
&= \frac{1}{\left(4\pi Dt\right)^{3N/2}} e^{-\left(\vect{R} - \vect{R}^\prime\right)^2 /4Dt }
\end{align*}






%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Tensors}

Working with a spacetime with a metric signature $(+ - - -)$,
$$
\begin{pmatrix}
    1 & 0  & 0  & 0  \\
    0 & -1 & 0  & 0  \\
    0 & 0  & -1 & 0  \\
    0 & 0  & 0  & -1 \\
\end{pmatrix}
$$

$x^\mu = (x^0, \vect{x})$ and $x_\mu = g_{\mu\nu} x^\nu = (x^0, -\vect{0})$.
To see this explciitly, let's carry out the summations.

When $\mu = 0$, $x_0 = g_{00}x^0 + g_{01}x^1 + g_{02}x^2 + g_{03}x^3 = x^0 + 0 + 0 +0 = x^0$.
For $\mu = 1$, $x_1 = g_{10}x^0 + g_{11}x^1 + g_{12}x^2 + g_{13}x^3 = 0 + x^1 + 0 +0 = -x^0$.
Similarly, when $\mu = 2$, $x_2 = -x^2$, and when $\mu =3$, $x_3 = -x^3$.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Inner Product}

Why does $p \cdot x = g_{\mu\nu} p^\mu x^\nu = g^{\mu\nu} p_\mu x_\nu = p_\mu x^\nu = p^\mu x_\nu = p^0 x^0 - \vect{p}\cdot\vect{x}$?

The metric tensor defines the geometry of spacetime, including the way distances and angles are measured.
The implied summation, einstein summation, effectively 'weights' the components according to the geometry of spacetime.

$g_{\mu\nu}$ lowers indices, while $g^{\mu\nu}$ raises them.
$\delta^{\mu}_{\nu}$ is a diagonal matrix with ones on the diagonal and zeros elsewhere.
It selects the $\mu$-th component when used in a summation, acting like an identity element.

$g^{\mu\alpha} g_{\alpha\nu} = \delta^{\mu}_{\nu}$

$$
g^{\mu\alpha} g_{\alpha\nu} = \sum_{\alpha = 0} g^{\mu\alpha} g_{\alpha\nu} =
g^{\mu 0} g_{0 \nu} + g^{\mu 1} g_{1\nu} + g^{\mu 2} g_{2\nu} + g^{\mu 3} g_{3\nu}
$$

This is essentially a matrix multiplication.
$$
\begin{pmatrix}
    1 & 0  & 0  & 0  \\
    0 & -1 & 0  & 0  \\
    0 & 0  & -1 & 0  \\
    0 & 0  & 0  & -1 \\
\end{pmatrix}
\cdot
\begin{pmatrix}
    1 & 0  & 0  & 0  \\
    0 & -1 & 0  & 0  \\
    0 & 0  & -1 & 0  \\
    0 & 0  & 0  & -1 \\
\end{pmatrix}
=
\begin{pmatrix}
    1 & 0 & 0 & 0 \\
    0 & 1 & 0 & 0 \\
    0 & 0 & 1 & 0 \\
    0 & 0 & 0 & 1 \\
\end{pmatrix}
$$

Going component by component, take the second row and second column, $\mu=1$ and $\nu=1$.
The element for that entry is given by
$$
g^{1\alpha}g_{\alpha 1} =
g^{1 0} g_{0 1} + g^{1 1} g_{1 1} + g^{1 2} g_{2 1} + g^{1 3} g_{3 1}
= 0 + (-1)(-1) + 0 + 0 = 1
$$